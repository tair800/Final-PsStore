@model List<Final.Mvc.ViewModels.WishlistVMs.WishlistItemVM>

<h2>Your Wishlist</h2>

@if (Model != null && Model.Any())
{
    <ul>
        @foreach (var item in Model)
        {
            <li>
                <img src="@item.ImgUrl" alt="@item.GameTitle" />
                <strong>@item.GameTitle</strong> - $@item.Price
                <button type="button" onclick="removeFromWishlist(@item.GameId)">Remove</button>
            </li>
        }
    </ul>
}
else
{
    <p>Your wishlist is empty.</p>
}

@section Scripts {
    <script>
        function removeFromWishlist(gameId) {
            $.ajax({
                url: '@Url.Action("RemoveFromWishlist", "Wishlist")',
                type: 'POST',
                data: { gameId: gameId },
                success: function () {
                    location.reload(); // Reload the page after removing
                },
                error: function () {
                    alert('Failed to remove item from wishlist');
                }
            });
        }
    </script>
}
